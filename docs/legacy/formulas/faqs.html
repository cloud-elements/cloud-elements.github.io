<!DOCTYPE html>
<html lang="en">
<head>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/history.js/1.8/bundled-uncompressed/html4+html5/jquery.history.js"></script>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
  <meta name="description" content="Cloud Elements is an API Integration Platform built for application developers and API publishers">
  <meta name="keywords" content="Cloud Elements, API Documentation, API Integration Platform, API Integration, API Management, Integration Tools">
  <meta name="author" content="Cloud Elements">
  <meta name="google-site-verification" content="RCqiEIyEbmcYtLZRYMOejbAaMr4EhW9jkorS6AbdJ_k" />
  <title>Developer Portal | Cloud Elements</title>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,700,400italic" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/assets/font-awesome/css/font-awesome.min.css">
  <link href="/assets/css/toolkit-light.css" rel="stylesheet">
  <link href="/assets/css/docs.css" rel="stylesheet">
  <link href="/assets/css/application.css" rel="stylesheet">
  <link href="/assets/css/custom-styles.css" rel="stylesheet">
  <link rel="canonical" href="https://developers.cloud-elements.com/docs/legacy/formulas/faqs.html">
  <!-- <link href="/api-docs/css/screen.css" media="screen" rel="stylesheet" type="text/css"/> -->
  <!-- <link href="/assets/css/elementDocs.css" rel="stylesheet"> -->
  <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
<link rel="manifest" href="/favicon/manifest.json">
<link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#5bbad5">
<meta name="theme-color" content="#ffffff">

  <style>
  /* note: this is a hack for ios iframe for bootstrap themes shopify page */
  /* this chunk of css is not part of the toolkit :) */
  body {
    width: 1px;
    min-width: 100%;
    *width: 100%;
  }
  </style>
</head>

<body class="with-top-navbar">
  <!-- Main Nav -->
<!-- Include the aloglia light search client from jsdelivr-->
<script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearchLite.min.js"></script>
<script type="text/javascript">
  let client = algoliasearch('G8W6UO94HX', 'f8dafac4c9e969eecadf7f97f8d3f15f');
  let index = client.initIndex('developer_portal_pages');
  let results;
  function executeSearch(){
    let resultsList = document.getElementById('resultsList');
    resultsList.innerHTML = '';
    let searchTerm = document.getElementById('searchBox').value;
    // Only execute the search if the user has entered at least 3 characters
    if(searchTerm.length >= 3){
      index.search(searchTerm, function searchDone(err, content) {
        // Loop through the results returned by aloglia
        console.log(content);
        content.hits.forEach(element => {
          let listItem = document.createElement('li');
          listItem.setAttribute("class", "resultsItem");
          listItem.innerHTML =
            listItem.innerHTML + '<a class=\'resultItemLink\' href='+element.url+'>' + element.heading + ' | ' + element.title + '</a>' + '<br/>' + element._snippetResult.text.value;
          resultsList.appendChild(listItem);
        })
      });
      $(".searchResultsContainerActive").click(function(e){
        console.log("was clicked");
        console.log(e.target);
        if($(e.target).is("a") || $(e.target).is("div[id='resultsContainer']")){
          let resultsList = document.getElementById('resultsList');
          $(resultsList).empty();
          $("#searchBox").val("");
          document.getElementById("resultsContainer").className = "searchResultsContainer";
        }
      })
    }
    if(searchTerm.length >= 3){
      document.getElementById("resultsContainer").className = "searchResultsContainerActive";
    }
    else{
      document.getElementById("resultsContainer").className = "searchResultsContainer";
    }
  }
</script>
<link href="/assets/css/navbar.css" rel="stylesheet">
<nav class="nav navbar navbar-light navbar-fixed-top">
  <div class="container-fluid navbar-wraper">
    <div class="navbar-header col-md-2">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a id="logo" class="navbar-brand navbar-brand-emphasized" href="http://cloud-elements.com/">
        <img src="/assets/img/cloud-elements-logo.png" alt="Cloud Elements Logo" />
      </a>
    </div>
    <div class="searchBoxContainer col-md-4 hidden-sm hidden-xs">
      <div class="searchBoxWrapper">
        <input
          id="searchBox"
          class="searchBox"
          type="text"
          placeholder="Search the docs..."
          onkeyup="executeSearch()"
          autocomplete="off"
        >
        <span class="icon icon-magnifying-glass"></span>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse col-md-6 float-right">
      <ul class="nav navbar-nav">
        <li>
          <a href="http://status.cloud-elements.com/">Status</a>
        </li>
        <li>
          <a href="https://support.cloud-elements.com/hc/en-us">Support</a>
        </li>
        <li>
          <a href="https://offers.cloud-elements.com/cloud-elements-free-trial-sign-up" target="_blank">
          <button type="button" class="btn btn-lg btn-danger try-it">Try it For Free! <i class="fa fa-caret-right"></i></button>
          </a>
        </li>
      </ul>
    </div>
  </div>
  <div class="searchResultsContainer" id='resultsContainer'>
    <div class="leftPadding col-md-3"> </div>
    <div class="resultsWrapper col-md-6">
      <ul id="resultsList">

      </ul>
    </div>
    <div class="rightPadding col-md-3"></div>
  </div>
  <script>
    // $(document).ready(function(){
    //   console.log('its ready');

    // })
  </script>
</nav>
<!-- END Main Nav -->


  <div class="container-fluid pageContainer">
    <div class="col-md-3 sidebar">
    <link href="/assets/css/sidebar.css" rel="stylesheet">
<link href="/assets/css/release-notes.css" rel="stylesheet">
<script type="text/javascript">
  let currentSelection="";
  // Initialize the expanded menu
  function setCurrentSelection(selection){
    currentSelection = selection;
    document.getElementById(selection).className = "accordionListActive";
  }
  // Accordion List toggle
  function selectAccordion(selection) {
    if(currentSelection != ""){
      document.getElementById(currentSelection).className = "accordionList";
    }
    document.getElementById(selection).className = "accordionListActive";
    currentSelection = selection;
  }
</script>
<div class="sidebarWrapper" id="sidebarWrapper">
</div>
<!-- This section loads in the accordion menu from the sitemap.html file
     Its too expensive to build the site map for each page in the portal -->
<script>
  $(window).on('load',(e) => {
    // Pull in the liquid generated sitemap
    $("#sidebarWrapper").load("/docs/sitemap.html", () =>{
      let pathWithQuery = `${window.location.pathname}${window.location.search}`;
      // Expand the current high level accordion
      let highLevelId = $(`a[href*='${pathWithQuery}']`).closest(`[class*='accordionList']`).attr("id");
      if(highLevelId) setCurrentSelection(highLevelId);
      // Expand the lower level heading
      let currentSelection = $(`a[href*='${pathWithQuery}']`).closest('ul').find('.subItem');
      if(currentSelection) currentSelection.attr('class', 'subItemActive');
      // Create a click listener for sub items
      // Accordion operations
      $(".subHeading").click(function() {
        let selection = $(this).parent().find(".subItem");
        selection.attr('class', 'subItemActive');
        if(currentSelection) currentSelection.attr('class', 'subItem');
        currentSelection = selection;
      });


      // Initialized the highlighting wrapper
      $(`.sidebarWrapper a[href='${pathWithQuery}']`).addClass("activeAccordionLink");
      //Create Click listener for the links
      $(".sidebarWrapper a").click((e)=> {
        $(".activeAccordionLink").removeClass("activeAccordionLink");
        $(e.target).addClass("activeAccordionLink");
      })
    });
  });
</script>

    </div>
    <div class="col-md-9 contentWrapper elementDocContentWrapper">
      <link href="/api-docs/css/screen.css" media="screen" rel="stylesheet" type="text/css"/>
      <link href="/assets/css/elementDocs.css" rel="stylesheet">
      <div class="container-fluid">
        <div class="pageHeading">
          <h2> Formulas </h2>
          <!-- <h4> Frequently Asked Questions </h4> -->
        </div>
        <div class="pageTabs">
          
          
          
          <div class="tab">
            <a href="/docs/legacy/formulas/?elementId=">Overview</a>
          </div>
          
          <div class="tab">
            <a href="/docs/legacy/formulas/definitions.html?elementId=">Definitions</a>
          </div>
          
          <div class="tab">
            <a href="/docs/legacy/formulas/forumulaSteps.html?elementId=">Formula Step Types</a>
          </div>
          
          <div class="tab">
            <a href="/docs/legacy/formulas/firstFormula.html?elementId=">Build Your First Formula</a>
          </div>
          
          <div class="tab">
            <a href="/docs/legacy/formulas/formulaScopes.html?elementId=">Formula Step Scope</a>
          </div>
          
          <div class="tab">
            <a href="/docs/legacy/formulas/examples.html?elementId=">Examples</a>
          </div>
          
          <div class="tab">
            <a href="/docs/legacy/formulas/faqs.html?elementId=">FAQs</a>
          </div>
          
          <div class="tab">
            <a href="/docs/legacy/formulas/api-documentation.html?elementId=">API Documentation</a>
          </div>
          
        </div>
      </div>
      <div class="elementDocContent">
        <div markdown="span" class="bs-callout bs-callout-info">The documentation in this section is for Cloud Elements 1.0. Find Cloud Elements 2.0 documentation at <a href=../../guides/formulasC2/index.html>Building Formulas</a>.</div>

<h1 id="faqs">FAQs</h1>

<h2 id="how-do-i-go-about-debugging-a-formula-instance-execution"><strong>How do I go about debugging a formula instance execution?</strong></h2>

<p>As always, everything we do is API-first, so you can always use the formula platform APIs to retrieve details about an execution including all of that execution&#39;s step executions and step execution values.  To view all platform APIs for formulas, click on &quot;API Docs&quot; in the right-hand panel.</p>

<p>That being said, <a href="#" data-toggle="tooltip" data-original-title="The Cloud Elements user interface that provides access to the features and APIs avalable with Cloud Elements.">Cloud Elements</a> leverages those APIs for you, so sometimes it can be easier to view executions there.  To do so, simply login to <a href="#" data-toggle="tooltip" data-original-title="The Cloud Elements user interface that provides access to the features and APIs avalable with Cloud Elements.">Cloud Elements</a>, and click on &quot;Executions&quot; in the left-hand panel under the &quot;Formulas&quot; heading.</p>

<p><img src="/assets/img/formulas/executions.gif" alt="ExecutionsScreen"></p>

<p>The <code>GET /formulas/instances/executions/{executionId}/errors</code> API allows you to retrieve errors for a formula instance execution.
This API returns any steps that failed and the step execution value containing the error message.</p>

<p>This can also be accessed via <a href="#" data-toggle="tooltip" data-original-title="The Cloud Elements user interface that provides access to the features and APIs avalable with Cloud Elements.">Cloud Elements</a> UI within the &quot;Executions&quot; Screen:</p>

<p><img src="https://cloud.githubusercontent.com/assets/7445993/19490597/037c8d34-952d-11e6-8c96-c2280ff329a2.gif" alt="ExecutionErrorsScreen"></p>

<h2 id="my-formula-is-not-running"><strong>My formula is not running.</strong></h2>

<p>First off, that&#39;s not a question.  Secondly, if your formula is not running, check the following:</p>

<ul>
<li>Have you created an instance of the formula?</li>
<li>Is the trigger&#39;s element instance active?</li>
<li>If the trigger is an event type, are events enabled for the trigger&#39;s element instance?</li>
<li>If you click on &quot;Events&quot; in <a href="#" data-toggle="tooltip" data-original-title="The Cloud Elements user interface that provides access to the features and APIs avalable with Cloud Elements.">Cloud Elements</a>, can you see that we are receiving events for this element instance?</li>
<li>Are both the formula and formula instance set to &quot;active&quot;?</li>
<li>If you click on &quot;Executions&quot; in Cloud Elements, can you see that it&#39;s running but failing somewhere?</li>
<li>Is it a full moon? (jokes...)</li>
</ul>

<h2 id="how-fast-do-formulas-run"><strong>How fast do formulas run?</strong></h2>

<p>Unfortunately, this is a <em>very</em> difficult question to answer.  That being said, the speed of a given formula is dependent upon things like:</p>

<ul>
<li>How many steps does it have?</li>
<li>What type of steps are running?</li>
<li>How fast are the <code>elementRequest</code> step endpoints&#39; APIs?</li>
<li>How many concurrent formulas does your Cloud Elements account have running?</li>
</ul>

<h2 id="can-i-use-external-javascript-libraries-in-my-javascript"><strong>Can I use external Javascript libraries in my Javascript?</strong></h2>

<p>Some external Javascript libraries are supported.  For the most up-to-date list, or to request a new library be supported, contact <a href="mailto:support@cloud-elements.com">Cloud Elements Support</a>.</p>

<h2 id="how-can-i-monitor-for-errors-that-occur-in-my-formula"><strong>How can I monitor for errors that occur in my formula?</strong></h2>

<p>You can set up a formula instance to send notifications for any errors via email or webhooks. This is done by setting the optional <code>notification.email</code> and/or <code>notification.webhook.url</code> settings when creating or updating the formula instance. You can do this via the formula instances UI or API. Both fields can be set to a single value or a comma separated list. The formula instances API payload should look like this:</p>
<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Formula Instance Name"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"configuration"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"&lt;key&gt;"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;value&gt;"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"settings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"notification.email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"email1@test.com, email2@test.com"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"notification.webhook.url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://listener.com"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h2 id="what-if-i-need-my-formula-to-run-only-one-execution-at-a-time"><strong>What if I need my formula to run only one execution at a time?</strong></h2>

<p>If you need to run your executions in a queue so only one execution is running per formula instance at any point in time, you can set the <code>singleTreaded</code> flag to <code>true</code> on the formula. This is not recommended unless it is absolutely required by your use case as it will increase the overall execution time.</p>

<h2 id="can-i-do-file-uploads-and-downloads-in-a-formula"><strong>Can I do file uploads and downloads in a formula?</strong></h2>

<p>Yes. There are two ways to do this, but the preferred way is using a <code>elementRequestStream</code> step. The second option, using an elementRequest or httpRequest step is only supported for smaller files. If you are using our bulk APIs or downloading another large file, you need to use the <code>elementRequestStream</code> step.</p>

<h2 id="how-can-i-do-file-uploads-and-downloads-in-a-formula"><strong>How can I do file uploads and downloads in a formula?</strong></h2>

<h4 id="option-1-the-elementrequeststream-step-the-far-superior-option">Option #1: The <code>elementRequestStream</code> step (the far superior option)</h4>

<p>In a <code>elementRequestStream</code> step you can move a file from one place to another. This is done in a stream and the file content is not stored in the context of the formula. In the step you will specify all the necessary parameters for both an upload and a download API call. The step will execute the download API call and stream the response body of that request to the upload API.</p>

<h4 id="option-2-the-other-option">Option #2: The other option</h4>

<blockquote>
<p><strong>NOTE:</strong> You should not use this unless the file is very small and option #1 will not work for you.</p>
</blockquote>

<p>If you have an elementRequest or an httpRequest step that calls an API which downloads a file, the response body will have the
following format:</p>
<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
        </span><span class="s2">"filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"myFile.pdf"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"workflow-file-attachment"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"base64 encoded string of file"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>You can then use that same body (or modify the filename first, if you would like) as the body of an elementRequest
step for an API that posts a file. You do not need to add any additional headers or parameters,
just the body in this format.</p>

<h2 id="how-can-i-make-a-multipart-request-in-a-formula"><strong>How can I make a multipart request in a formula?</strong></h2>

<p>If you have downloaded a file in a previous step and want to make a multipart request with that file you can do that
using an elementRequest step with a body in the following format. In this example the call takes 2 form parameters,
one of which is a file and the other is JSON metadata. Again, you do not need to add any additional headers or
parameters to this call.</p>
<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="s2">"parts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"metaData"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"your"</span><span class="p">:</span><span class="w"> </span><span class="s2">"json"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"Content-Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text/plain"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"file"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"myfile.jpg"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"the encoded string that you got when you downloaded the file"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Content-Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"application/octet-stream"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"workflow-multipart"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h2 id="what-are-some-uses-cases-to-use-the-retryformulaexecution-step-type"><strong>What are some uses cases to use the <code>retryFormulaExecution</code> step type?</strong></h2>

<p>The typical use cases to use a <code>retryFormulaExecution</code> step type are -</p>

<ol>
<li>If an endpoint that the formula uses is going to be down for an extended period of time, i.e., the endpoint is down for maintenance and not due to a network hiccup. In such a scenario, retry attempts of the <code>request</code>, <code>elementRequest</code> or <code>httpRequest</code> step are not enough as such attempts will retry in a second or less. The formula execution as a whole needs to truncated and retried with the same input data (event, manual trigger, etc.), minutes or even hours later.</li>
<li>If an event triggers a formula execution, but the object at the source endpoint does have all the data in the required state yet, perhaps because there is an asynchronous workflow in place at the source service endpoint. This will require that the formula be re-executed in a few minutes, so that the necessary data condition of the object for which the event was triggered, has now occurred at the endpoint.</li>
</ol>

<p>Basically, any use case where the formula execution needs to wait for a few minutes or more, and retry the execution, can be accomplished using a <code>retryFormulaExecution</code> step.</p>

      </div>
      <script type="text/javascript">
        // Init the active tab
        $(`a[href='${window.location.pathname}${window.location.search}']`).parent().addClass("activeTab");
        $(`a[href^='${window.location.pathname}?']`).parent().addClass("activeTab");
        // Toggle the current active tab on the element menu
        $(".tab a").click((e)=> {
          $(".activeTab").removeClass("activeTab");
          $(e.target).parent().addClass("activeTab");
        })
      </script>
    </div>
  </div>
  <script src="/assets/js/tablesorter.min.js"></script>
  <script src="/assets/js/toolkit.js"></script>
  <script src="/assets/js/application.js"></script>
  <!-- /_includes/google_analytics.html -->
<script>
 (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
 (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
 m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
 })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

 ga('create', 'UA-32342187-1', 'auto');
 //ga('create', 'UA-106858868-1', 'auto');
 ga('send', 'pageview');

</script>

  <!-- Engagio Tracking Script -->
<script type=“text/javascript” charset=“utf-8 ">
var _eiq = _eiq || [];
var _engagio_settings = {
accountId: “572b5582906e828baac61d212c133b568b913200”
};
(function() {
var ei = document.createElement(‘script’); ei.type = ‘text/javascript’; ei.async = true;
ei.src = (‘https:’ == document.location.protocol ? ‘https://’ : ‘http://’) + ‘web-analytics.engagio.com/js/ei.js’;
var s = document.getElementsByTagName(‘script’)[0]; s.parentNode.insertBefore(ei, s);
})();
</script>
  <!-- Start of Async HubSpot Analytics Code -->
 <script type="text/javascript">
   (function(d,s,i,r) {
     if (d.getElementById(i)){return;}
     var n=d.createElement(s),e=d.getElementsByTagName(s)[0];
     n.id=i;n.src='//js.hs-analytics.net/analytics/'+(Math.ceil(new Date()/r)*r)+'/440197.js';
     e.parentNode.insertBefore(n, e);
   })(document,"script","hs-analytics",300000);
 </script>
<!-- End of Async HubSpot Analytics Code -->

  <script src="/assets/js/ajaxLoading.js"></script>
  <script>
  // execute/clear BS loaders for docs
  $(function(){while(window.BS&&window.BS.loader&&window.BS.loader.length){(window.BS.loader.pop())()}})
  </script>
</body>
</html>
