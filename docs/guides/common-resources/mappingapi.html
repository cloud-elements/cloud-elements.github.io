<!DOCTYPE html>
<html lang="en">
<head>
  <!-- History.js -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/history.js/1.8/bundled-uncompressed/html4+html5/jquery.history.js"></script>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
  <meta name="description" content="Cloud Elements is an API Integration Platform built for application developers and API publishers">
  <meta name="keywords" content="Cloud Elements, API Documentation, API Integration Platform, API Integration, API Management, Integration Tools">
  <meta name="author" content="Cloud Elements">
  <meta name="google-site-verification" content="RCqiEIyEbmcYtLZRYMOejbAaMr4EhW9jkorS6AbdJ_k" />
  <title>Developer Portal | Cloud Elements</title>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,700,400italic" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/assets/font-awesome/css/font-awesome.min.css">
  <link href="/assets/css/toolkit-light.css" rel="stylesheet">
  <link href="/assets/css/docs.css" rel="stylesheet">
  <link href="/assets/css/application.css" rel="stylesheet">
  <link href="/assets/css/custom-styles.css" rel="stylesheet">
  <link rel="canonical" href="https://developers.cloud-elements.com/docs/guides/common-resources/mappingapi.html">

  <script src="/api-docs/swagger-ui.js" type="text/javascript"></script>
  <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
<link rel="manifest" href="/favicon/manifest.json">
<link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#5bbad5">
<meta name="theme-color" content="#ffffff">

  <style>
  /* note: this is a hack for ios iframe for bootstrap themes shopify page */
  /* this chunk of css is not part of the toolkit :) */
  body {
    width: 1px;
    min-width: 100%;
    *width: 100%;
  }
  </style>
</head>

<body class="with-top-navbar">
  <!-- Main Nav -->
<!-- Include the aloglia light search client from jsdelivr-->
<script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearchLite.min.js"></script>
<script type="text/javascript">
  let client = algoliasearch('G8W6UO94HX', 'f8dafac4c9e969eecadf7f97f8d3f15f');
  let index = client.initIndex('developer_portal_pages');
  let results;
  function executeSearch(){
    let resultsList = document.getElementById('resultsList');
    resultsList.innerHTML = '';
    let searchTerm = document.getElementById('searchBox').value;
    // Only execute the search if the user has entered at least 3 characters
    if(searchTerm.length >= 3){
      index.search(searchTerm, function searchDone(err, content) {
        // Loop through the results returned by aloglia
        console.log(content);
        content.hits.forEach(element => {
          let listItem = document.createElement('li');
          listItem.setAttribute("class", "resultsItem");
          listItem.innerHTML =
            listItem.innerHTML + '<a class=\'resultItemLink\' href='+element.url+'>' + element.heading + ' | ' + element.title + '</a>' + '<br/>' + element._snippetResult.text.value;
          resultsList.appendChild(listItem);
        })
      });
      $(".searchResultsContainerActive").click(function(e){
        console.log("was clicked");
        console.log(e.target);
        if($(e.target).is("a") || $(e.target).is("div[id='resultsContainer']")){
          let resultsList = document.getElementById('resultsList');
          $(resultsList).empty();
          $("#searchBox").val("");
          document.getElementById("resultsContainer").className = "searchResultsContainer";
        }
      })
    }
    if(searchTerm.length >= 3){
      document.getElementById("resultsContainer").className = "searchResultsContainerActive";
    }
    else{
      document.getElementById("resultsContainer").className = "searchResultsContainer";
    }
  }
</script>
<link href="/assets/css/navbar.css" rel="stylesheet">
<nav class="nav navbar navbar-light navbar-fixed-top">
  <div class="container-fluid navbar-wraper">
    <div class="navbar-header col-md-2">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a id="logo" class="navbar-brand navbar-brand-emphasized" href="http://cloud-elements.com/">
        <img src="/assets/img/cloud-elements-logo.png" alt="Cloud Elements Logo" />
      </a>
    </div>
    <div class="searchBoxContainer col-md-4 hidden-sm hidden-xs">
      <div class="searchBoxWrapper">
        <input
          id="searchBox"
          class="searchBox"
          type="text"
          placeholder="Search the docs..."
          onkeyup="executeSearch()"
          autocomplete="off"
        >
        <span class="icon icon-magnifying-glass"></span>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse col-md-6 float-right">
      <ul class="nav navbar-nav">
        <li>
          <a href="http://status.cloud-elements.com/">Status</a>
        </li>
        <li>
          <a href="https://support.cloud-elements.com/hc/en-us">Support</a>
        </li>
        <li>
          <a href="https://offers.cloud-elements.com/cloud-elements-free-trial-sign-up" target="_blank">
          <button type="button" class="btn btn-lg btn-danger try-it">Try it For Free! <i class="fa fa-caret-right"></i></button>
          </a>
        </li>
      </ul>
    </div>
  </div>
  <div class="searchResultsContainer" id='resultsContainer'>
    <div class="leftPadding col-md-3"> </div>
    <div class="resultsWrapper col-md-6">
      <ul id="resultsList">

      </ul>
    </div>
    <div class="rightPadding col-md-3"></div>
  </div>
  <script>
    // $(document).ready(function(){
    //   console.log('its ready');

    // })
  </script>
</nav>
<!-- END Main Nav -->


  <div class="container-fluid pageContainer">

    <div class="col-md-3 sidebar">
    <link href="/assets/css/sidebar.css" rel="stylesheet">
<link href="/assets/css/release-notes.css" rel="stylesheet">
<script type="text/javascript">
  let currentSelection="";
  // Initialize the expanded menu
  function setCurrentSelection(selection){
    currentSelection = selection;
    document.getElementById(selection).className = "accordionListActive";
  }
  // Accordion List toggle
  function selectAccordion(selection) {
    if(currentSelection != ""){
      document.getElementById(currentSelection).className = "accordionList";
    }
    document.getElementById(selection).className = "accordionListActive";
    currentSelection = selection;
  }
</script>
<div class="sidebarWrapper" id="sidebarWrapper">
</div>
<!-- This section loads in the accordion menu from the sitemap.html file
     Its too expensive to build the site map for each page in the portal -->
<script>
  $(window).on('load',(e) => {
    // Pull in the liquid generated sitemap
    $("#sidebarWrapper").load("/docs/sitemap.html", () =>{
      let pathWithQuery = `${window.location.pathname}${window.location.search}`;
      // Expand the current high level accordion
      let highLevelId = $(`a[href*='${pathWithQuery}']`).closest(`[class*='accordionList']`).attr("id");
      if(highLevelId) setCurrentSelection(highLevelId);
      // Expand the lower level heading
      let currentSelection = $(`a[href*='${pathWithQuery}']`).closest('ul').find('.subItem');
      if(currentSelection) currentSelection.attr('class', 'subItemActive');
      // Create a click listener for sub items
      // Accordion operations
      $(".subHeading").click(function() {
        let selection = $(this).parent().find(".subItem");
        selection.attr('class', 'subItemActive');
        if(currentSelection) currentSelection.attr('class', 'subItem');
        currentSelection = selection;
      });


      // Initialized the highlighting wrapper
      $(`.sidebarWrapper a[href='${pathWithQuery}']`).addClass("activeAccordionLink");
      //Create Click listener for the links
      $(".sidebarWrapper a").click((e)=> {
        $(".activeAccordionLink").removeClass("activeAccordionLink");
        $(e.target).addClass("activeAccordionLink");
      })
    });
  });
</script>

    </div>
    <div class="col-md-9 contentWrapper">
      <div markdown="span" class="bs-callout bs-callout-warning" role="alert">
  <h4>The docs are moving! </h4><p>Find us at our new <a href ="https://docs.cloud-elements.com/">Help Center</a> where we've combined our documentation and knowledgebase articles in one easy-to-search location.</p><p>We aren't updating the Developer Portal anymore, except for the Element Docs &mdash; all updates happen in the <a href ="https://docs.cloud-elements.com/">Help Center</a>. We're retiring the Developer Portal as you know it in:</p><h4 id="demo"></h4>
  <script>
  // Set the date we're counting down to
  var countDownDate = new Date("December 14, 2018 20:00:00").getTime();

  // Update the count down every 1 second
  var x = setInterval(function() {

      // Get todays date and time
      var now = new Date().getTime();

      // Find the distance between now an the count down date
      var distance = countDownDate - now;

      // Time calculations for days, hours, minutes and seconds
      var days = Math.floor(distance / (1000 * 60 * 60 * 24));
      var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
      var seconds = Math.floor((distance % (1000 * 60)) / 1000);

      // Output the result in an element with id="demo"
      document.getElementById("demo").innerHTML = days + " days " + hours + " hours " + minutes + "m " + seconds + "s ";

      // If the count down is over, write some text
      if (distance < 0) {
          clearInterval(x);
          document.getElementById("demo").innerHTML = "EXPIRED";
      }
  }, 1000);
  </script>

</div>

      <script src="/assets/js/application.js"></script>
<link href="/assets/css/contentToggle.css" rel="stylesheet">


  <div class="toggleButtonWrapper">
    <a class="button leftButton" href=mapping>
      UI
    </a>
    <a class="button rightButton active">
      API
    </a>
  </div>


      
      <h1 id="transforming-fields-via-api">Transforming Fields via API</h1>

<p>A transformation is the result of the process of <a href="#" data-toggle="tooltip" data-original-title="The process of associating objects within a vendor's resource to objects in a common resource so the vendor objects can be transformed.">mapping</a> fields in your <a href="#" data-toggle="tooltip" data-original-title="The resources available to the element instance through its API.">element instance resources</a> to existing fields and objects in a  <a href="#" data-toggle="tooltip" data-original-title="A stand-alone resource, created and defined by a user with the intention of creating a one-to-many transformation.">common resource</a>. After you create a common resource, you will select an element instance, choose the resource containing the objects that you want to map to the common resource, and map fields to the common resource. The end result is a a transformation of the selected objects in the element instance.</p>

<p>You can test the APIs described in this section using our interactive documentation. Open Cloud Elements, and then click <img src="img/btn-Code.png" alt="Custom JS" class="inlineImage"> in the header.</p>

<div markdown="span" class="bs-callout bs-callout-primary"><strong>On this page</strong><br/><a href=#retrieve-a-list-of-common-resources>Retrieve a List of Common Resources</a><br/><a href=#map-fields-to-create-a-default-transformation>Map Fields to Create a Default Transformation</a><br/><a href=#map-fields-at-the-instance-level>Map Fields at the Instance Level</a></br><a href=#map-fields-at-the-account-level>Map Fields at the Account Level</a></br><a href=#map-complex-objects>Map Complex Objects</a></div>

<h2 id="retrieve-a-list-of-common-resources">Retrieve a List of Common Resources</h2>

<p>You can retrieve a list of the common resources in your organization. The list includes all fields defined in the common resource.</p>

<p>To retrieve a list of common resources:</p>

<ol>
<li><p>Call the following:</p>
<div class="highlight"><pre><code class="language-" data-lang="">  GET /organizations/objects/definitions
</code></pre></div></li>
<li><p>Continue to the next step: <a href="#map-fields-to-create-a-default-transformation">map fields to create a transformation</a>.</p></li>
</ol>

<h3 id="curl-example">cURL Example</h3>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">curl <span class="nt">-X</span> GET <span class="se">\</span>
  https://api.cloud-elements.com/elements/api-v2/organizations/objects/definitions <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'authorization: User {USER_SECRET}, Organization {ORGANIZATION_SECRET}'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'content-type: application/json'</span>
</code></pre></div>
<h2 id="map-fields-to-create-a-default-transformation">Map Fields to Create a Default Transformation</h2>

<p>Cloud Elements provides several APIs to map resources. This section describes mapping fields for an organization-level default transformation. The result is a default transformation for all instances of a specific element.</p>

<p>To map fields:</p>

<ol>
<li><p>Construct a JSON body as shown below. For descriptions of each parameter, see <a href="#transformation-json-parameters">Transformation JSON Parameters</a>.</p>
<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="s2">"level"</span><span class="p">:</span><span class="s2">"organization"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"vendorName"</span><span class="p">:</span><span class="s2">"&lt;VENDOR_RESOURCE&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fields"</span><span class="p">:[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"path"</span><span class="p">:</span><span class="s2">"&lt;COMMON_RESOURCE_FIELD&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"&lt;COMMON_RESOURCE_TYPE&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"vendorPath"</span><span class="p">:</span><span class="s2">"&lt;VENDOR_FIELD&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"vendorType"</span><span class="p">:</span><span class="s2">"&lt;VENDOR_TYPE&gt;"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></li>
<li><p>Call the following, including the JSON body from the previous step:</p>
<div class="highlight"><pre><code class="language-" data-lang="">  POST /organizations/elements/{keyOrId}/transformations/{objectName}
</code></pre></div>
<p><div markdown="span" class="alert alert-info" role="alert"><i class="fa fa-info-circle"></i> <b>Note:</b> Replace {keyOrId} with the element key or id and replace {objectName} with the name of the common resource.</div></p></li>
</ol>

<h3 id="transformation-json-parameters">Transformation JSON Parameters</h3>

<table><thead>
<tr>
<th style="text-align: left">Parameter</th>
<th style="text-align: left">Description</th>
<th style="text-align: left">Required (Y/N)</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">level</td>
<td style="text-align: left">The access level of the transformation, either <code>organization</code>, <code>account</code>, or <code>instance</code>.</td>
<td style="text-align: left">N. Default depends on endpoint.</td>
</tr>
<tr>
<td style="text-align: left">vendorName</td>
<td style="text-align: left">The name of the resource that contains the fields that you want to map to the common resource.</td>
<td style="text-align: left">N</td>
</tr>
<tr>
<td style="text-align: left">fields</td>
<td style="text-align: left">An object containing the field names and data types of the common resource and the vendor resource. </br><div markdown="span" class="alert alert-success" role="alert"><i class="fa fa-check-square-o"></i> <b>Tip:</b> To get a list of fields in a resource, call <code>GET hubs/{hub}/objects/{RESOURCE}/metadata</code>.</div></td>
<td style="text-align: left">N</td>
</tr>
<tr>
<td style="text-align: left">path</td>
<td style="text-align: left">The name of the field in the common resource.</td>
<td style="text-align: left">Y</td>
</tr>
<tr>
<td style="text-align: left">vendorPath</td>
<td style="text-align: left">The name of the field in the vendor resource.</td>
<td style="text-align: left">Y</td>
</tr>
<tr>
<td style="text-align: left">type</td>
<td style="text-align: left">The data type of the field in the common resource. </br>Data types can be <code>boolean</code>, <code>string</code>, <code>date</code>, and <code>number</code>.</td>
<td style="text-align: left">N</td>
</tr>
<tr>
<td style="text-align: left">vendorType</td>
<td style="text-align: left">The data type of the field at the vendor. Unless the format is <code>date</code>, you do not need to include this parameter. If the format is <code>date</code>, also include a mask.</td>
<td style="text-align: left">N</td>
</tr>
</tbody></table>

<h3 id="curl-example">cURL Example</h3>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">curl <span class="nt">-X</span> POST <span class="se">\</span>
  https://api.cloud-elements.com/elements/api-v2/organizations/elements/sfdc/transformations/myContacts <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'authorization: User {USER_SECRET}, Organization {ORGANIZATION_SECRET}'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'
  {
  "level":"organization",
  "vendorName":"Contact",
  "fields":[
    {
      "type":"string",
      "path":"FirstName",
      "vendorPath":"FirstName"
    },
    {
      "type":"string",
      "path":"id",
      "vendorPath":"Id"
    },
    {
      "type":"string",
      "path":"LastName",
      "vendorPath":"LastName"
    },
    {
      "type":"date",
      "path":"birthdate",
      "vendorPath":"Birthdate",
      "vendorType":"date",
      "configuration":[

      ]
    }
  ]
}'</span>
</code></pre></div>
<h2 id="map-fields-at-the-instance-level">Map Fields at the Instance Level</h2>

<p>Using the Cloud Elements <code>instances</code> endpoint, you can map fields at the instance level. Mapping fields is a two-step process that includes creating an instance level resource, and then mapping fields to it.</p>

<p>To create an instance level common resource and map fields to it:</p>

<ol>
<li><p>Construct a JSON body for the instance level common resource as shown below (see <a href="createapi.html#new-common-resource-json-parameters">New Common Resource JSON Parameters</a>):</p>
<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;dataType&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;fieldName&gt;"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></li>
<li><p>Create the common resource. Make the following API call with the JSON body from the previous step, replacing <code>{id}</code> with the instance id, and replacing <code>{objectName}</code> with the name of the common resource:</p>
<div class="highlight"><pre><code class="language-" data-lang="">POST /instances/{id}/objects/{objectName}/definitions
</code></pre></div></li>
<li><p>Construct a JSON body to map fields to the new common resource as shown below. For descriptions of each parameter, see <a href="#transformation-json-parameters">Transformation JSON Parameters</a>.</p>
<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="s2">"level"</span><span class="p">:</span><span class="s2">"instance"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"vendorName"</span><span class="p">:</span><span class="s2">"&lt;VENDOR_RESOURCE&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fields"</span><span class="p">:[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"path"</span><span class="p">:</span><span class="s2">"&lt;COMMON_RESOURCE_FIELD&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"&lt;COMMON_RESOURCE_TYPE&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"vendorPath"</span><span class="p">:</span><span class="s2">"&lt;VENDOR_FIELD&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"vendorType"</span><span class="p">:</span><span class="s2">"&lt;VENDOR_TYPE&gt;"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></li>
<li><p>Map fields to the common resource. Call the following, including the JSON body from the previous step:</p>
<div class="highlight"><pre><code class="language-" data-lang="">POST /instances/{id}/transformations/{objectName}
</code></pre></div>
<p><div markdown="span" class="alert alert-info" role="alert"><i class="fa fa-info-circle"></i> <b>Note:</b> Replace <code>{id}</code> with the instance id and replace <code>{objectName}</code> with the name of the common resource.</div></p></li>
</ol>

<h3 id="curl-example">cURL Example</h3>

<h4 id="step-1-create-the-common-resource">Step 1: Create the common resource</h4>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">curl <span class="nt">-X</span> POST <span class="se">\</span>
  https://api.cloud-elements.com/elements/api-v2/instances/<span class="o">{</span><span class="nb">id</span><span class="o">}</span>/objects/<span class="o">{</span>objectName<span class="o">}</span>/definitions <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'authorization: User {USER_SECRET}, Organization {ORGANIZATION_SECRET}'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'
  {
    "fields": [
      {
        "type": "string",
        "path": "title"
      }
    ]
  }'</span>
</code></pre></div>
<h4 id="step-2-map-fields-to-the-common-resource">Step 2: Map fields to the common resource</h4>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">curl <span class="nt">-X</span> POST <span class="se">\</span>
  https://api.cloud-elements.com/elements/api-v2/instances/<span class="o">{</span><span class="nb">id</span><span class="o">}</span>/transformations/<span class="o">{</span>objectName<span class="o">}</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'authorization: User {USER_SECRET}, Organization {ORGANIZATION_SECRET}'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'
  {
    "vendorName": "Contact",
    "level": "instance",
    "fields": [
      {
        "path": "title",
        "type":"string",
        "vendorPath": "Title"
      }
    ]
  }'</span>
</code></pre></div>
<h2 id="map-fields-at-the-account-level">Map Fields at the Account Level</h2>

<p>Using the Cloud Elements <code>accounts</code> endpoint, you can map fields at the account level. Mapping fields is a two-step process that includes creating an account level resource, and then mapping fields to it.</p>

<p>To create an account level common resource and map fields to it:</p>

<ol>
<li><p>Construct a JSON body for the account level common resource as shown below (see <a href="createapi.html#new-common-resource-json-parameters">New Common Resource JSON Parameters</a>):</p>
<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="s2">"fields"</span><span class="p">:[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"&lt;dataType&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"path"</span><span class="p">:</span><span class="s2">"&lt;fieldName&gt;"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></li>
<li><p>Create the common resource. Make one of the following API calls with the JSON body from the previous step, replacing <code>{id}</code> with the account id, and replacing <code>{objectName}</code> with the name of the common resource:</p>
<div class="highlight"><pre><code class="language-" data-lang="">  POST /accounts/objects/{objectName}/definitions
</code></pre></div>
<p><div markdown="span" class="alert alert-info" role="alert"><i class="fa fa-info-circle"></i> <b>Note:</b> Use this API call to create a common resource at the default account level.</div></p>
<div class="highlight"><pre><code class="language-" data-lang="">  POST /accounts/{id}/objects/{objectName}/definitions
</code></pre></div>
<p><div markdown="span" class="alert alert-info" role="alert"><i class="fa fa-info-circle"></i> <b>Note:</b> Use this API call to specify an account by id.</div></p></li>
<li><p>Construct a JSON body to map fields to the new common resource as shown below. For descriptions of each parameter, see <a href="#transformation-json-parameters">Transformation JSON Parameters</a>.</p>
<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="s2">"level"</span><span class="p">:</span><span class="s2">"instance"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"vendorName"</span><span class="p">:</span><span class="s2">"&lt;VENDOR_RESOURCE&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fields"</span><span class="p">:[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"path"</span><span class="p">:</span><span class="s2">"&lt;COMMON_RESOURCE_FIELD&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"&lt;COMMON_RESOURCE_TYPE&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"vendorPath"</span><span class="p">:</span><span class="s2">"&lt;VENDOR_FIELD&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"vendorType"</span><span class="p">:</span><span class="s2">"&lt;VENDOR_TYPE&gt;"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></li>
<li><p>Map fields to the common resource. Call the following, including the JSON body from the previous step:</p>
<div class="highlight"><pre><code class="language-" data-lang="">POST /accounts/{id}/elements/{keyOrId}/transformations/{objectName}
</code></pre></div>
<p><div markdown="span" class="alert alert-info" role="alert"><i class="fa fa-info-circle"></i> <b>Note:</b> Replace<code>{id}</code> with the instance id, replace <code>{keyOrId}</code> with the element key or id, and replace <code>{objectName}</code> with the name of the common resource.</div></p></li>
</ol>

<h3 id="curl-example">cURL Example</h3>

<h4 id="step-1-create-the-common-resource-default-account">Step 1: Create the common resource (default account)</h4>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">curl <span class="nt">-X</span> POST <span class="se">\</span>
  https://api.cloud-elements.com/elements/api-v2/accounts/objects/<span class="o">{</span>objectName<span class="o">}</span>/definitions <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'authorization: User &lt;USER_SECRET&gt;, Organization &lt;ORGANIZATION_SECRET&gt;'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'
  {
    "fields": [
      {
        "type": "string",
        "path": "title"
      }
    ]
  }'</span>
</code></pre></div>
<h4 id="step-1-create-the-common-resource-specific-account">Step 1: Create the common resource (specific account)</h4>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">curl <span class="nt">-X</span> POST <span class="se">\</span>
  https://api.cloud-elements.com/elements/api-v2/accounts/<span class="o">{</span><span class="nb">id</span><span class="o">}</span>/objects/<span class="o">{</span>objectName<span class="o">}</span>/definitions <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'authorization: User &lt;USER_SECRET&gt;, Organization &lt;ORGANIZATION_SECRET&gt;'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'
  {
    "fields": [
      {
        "type": "string",
        "path": "title"
      }
    ]
  }'</span>
</code></pre></div>
<h4 id="step-2-map-fields-to-the-common-resource">Step 2: Map fields to the common resource</h4>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">curl <span class="nt">-X</span> POST <span class="se">\</span>
  https://api.cloud-elements.com/elements/api-v2/accounts/<span class="o">{</span><span class="nb">id</span><span class="o">}</span>/elements/<span class="o">{</span>keyOrIdtransformations<span class="o">}</span>/<span class="o">{</span>objectName<span class="o">}</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'authorization: User &lt;USER_SECRET&gt;, Organization &lt;ORGANIZATION_SECRET&gt;'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "vendorName": "Contact",
    "level": "account",
    "fields": [
      {
        "path": "title",
        "type":"string",
        "vendorPath": "Title"
      }

  }'</span>
</code></pre></div>
<h2 id="map-complex-objects">Map Complex Objects</h2>

<p>You can use regular expressions as values for the JSON body parameters.</p>

<p>Examples:</p>

<ul>
<li><p>Get the value of the name field from the Products array where id = 4.</p>
<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AppleIpadName"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"vendorPath"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Products[id=4].name"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></li>
<li><p>Get the value of the name field from the Products array where id = 2.</p>
<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AppleNewProductName"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"vendorPath"</span><span class="p">:</span><span class="w"> </span><span class="s2">"details.Products[?(@.id==2)].name"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></li>
<li><p>Get the touchId value from the Products array with id=2 which is inside the features object.</p>
<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AppleTouchProductId"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"vendorPath"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Products[?(@.features.touchId==true)].id"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></li>
<li><p>Get the Id value of the Products array at index 0.</p>
<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AppleProductId"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"vendorPath"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Products[0].id"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></li>
<li><p>Get a count of the Products array.</p></li>
</ul>
<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AppleProductsCount"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"vendorPath"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Products[*].size()"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
    </div>

  </div>
  <script src="/assets/js/chart.js"></script>
  <script src="/assets/js/tablesorter.min.js"></script>
  <script src="/assets/js/toolkit.js"></script>
  <script src="/assets/js/application.js"></script>
  <script src="/assets/js/ajaxLoading.js"></script>
  <!-- /_includes/google_analytics.html -->
<script>
 (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
 (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
 m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
 })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

 ga('create', 'UA-32342187-1', 'auto');
 //ga('create', 'UA-106858868-1', 'auto');
 ga('send', 'pageview');

</script>

  <!-- Start of Async HubSpot Analytics Code -->
 <script type="text/javascript">
   (function(d,s,i,r) {
     if (d.getElementById(i)){return;}
     var n=d.createElement(s),e=d.getElementsByTagName(s)[0];
     n.id=i;n.src='//js.hs-analytics.net/analytics/'+(Math.ceil(new Date()/r)*r)+'/440197.js';
     e.parentNode.insertBefore(n, e);
   })(document,"script","hs-analytics",300000);
 </script>
<!-- End of Async HubSpot Analytics Code -->

  <!-- Engagio Tracking Script -->
<script type=“text/javascript” charset=“utf-8 ">
var _eiq = _eiq || [];
var _engagio_settings = {
accountId: “572b5582906e828baac61d212c133b568b913200”
};
(function() {
var ei = document.createElement(‘script’); ei.type = ‘text/javascript’; ei.async = true;
ei.src = (‘https:’ == document.location.protocol ? ‘https://’ : ‘http://’) + ‘web-analytics.engagio.com/js/ei.js’;
var s = document.getElementsByTagName(‘script’)[0]; s.parentNode.insertBefore(ei, s);
})();
</script>
  <script>
  // execute/clear BS loaders for docs
  $(function(){while(window.BS&&window.BS.loader&&window.BS.loader.length){(window.BS.loader.pop())()}})
  </script>
</body>
</html>
